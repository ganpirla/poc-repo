#!/bin/bash

# Path to the file containing the list of URLs
URL_FILE="urls.txt"

# Check if the file exists
if [ ! -f "$URL_FILE" ]; then
  echo "URL file not found: $URL_FILE"
  exit 1
fi

# Loop through each URL in the file
while IFS= read -r URL; do
  # Skip empty lines or comments
  if [[ -z "$URL" || "$URL" == \#* ]]; then
    continue
  fi

  # Perform a curl request and capture the HTTP status code
  HTTP_STATUS=$(curl -s -o /dev/null -w "%{http_code}" "$URL")

  # Check if the status code is 200
  if [ "$HTTP_STATUS" -eq 200 ]; then
    echo "Health check successful for $URL! Status code: 200"
  else
    echo "Health check failed for $URL! Status code: $HTTP_STATUS"
  fi
done < "$URL_FILE"
